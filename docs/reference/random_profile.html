<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Random Profile — random_profile • aqp</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Random Profile — random_profile" />

<meta property="og:description" content="Generate a random soil profile according to set criteria, with correlated depth trends." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">aqp</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.17</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ncss-tech/aqp">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Random Profile</h1>
    
    <div class="hidden name"><code>random_profile.Rd</code></div>
    </div>

    
    <p>Generate a random soil profile according to set criteria, with correlated depth trends.</p>
    

    <pre class="usage"><span class='fu'>random_profile</span>(<span class='no'>id</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>6</span>), <span class='kw'>min_thick</span> <span class='kw'>=</span> <span class='fl'>5</span>,
 <span class='kw'>max_thick</span> <span class='kw'>=</span> <span class='fl'>30</span>, <span class='kw'>n_prop</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>exact</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>'random_walk'</span>,
 <span class='kw'>HzDistinctSim</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>id</th>
      <td><p>a character or numeric id used for this profile</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>vector of possible number of horizons, or the exact number of horizons (see below)</p></td>
    </tr>
    <tr>
      <th>min_thick</th>
      <td><p>minimum thickness criteria for a simulated horizon</p></td>
    </tr>
    <tr>
      <th>max_thick</th>
      <td><p>maximum thickness criteria for a simulated horizon</p></td>
    </tr>
    <tr>
      <th>n_prop</th>
      <td><p>number of simulated soil properties (columns in the returned dataframe)</p></td>
    </tr>
    <tr>
      <th>exact</th>
      <td><p>should the exact number of requested horizons be generated? (defaults to FALSE)</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>named method used to synthesize depth function ('random_walk' or 'LPP'), see details</p></td>
    </tr>
    <tr>
      <th>HzDistinctSim</th>
      <td><p>optionally simulate horizon boundary distinctness codes</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>additional parameters passed-in to the LPP (<code>.lpp</code>) function</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataframe with the simulated profile.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The random walk method produces profiles with considerable variation between horizons and is based on values from the normal distribution seeded with means and standard deviations drawn from the uniform distribtion of [0, 10].</p>
<p>The logistic power peak (LPP) function can be used to generate random soil property depth functions that are sharply peaked. LPP parameters can be hard-coded using the optional arguments: "lpp.a", "lpp.b", "lpp.u", "lpp.d", "lpp.e". Amplitude of the peak is controlled by ("lpp.a + "lpp.b"), depth of the peak by "lpp.u", and abruptness by "lpp.d" and "lpp.e". Further description of the method is outlined in (Brenton et al, 2011). Simulated horizon distinctness codes are based on the USDA-NCSS field description methods (<a href='http://www.nrcs.usda.gov/wps/portal/nrcs/detail//?cid=nrcs142p2_054184'>http://www.nrcs.usda.gov/wps/portal/nrcs/detail//?cid=nrcs142p2_054184</a>). Simulated distinctness codes are constrained according to horizon thickness, i.e. a gradual boundary (+/- 5cm) will not be simulated for horizons that are thinner than 3x this vertical distance</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Myers, D. B.; Kitchen, N. R.; Sudduth, K. A.; Miles, R. J.; Sadler, E. J. &amp; Grunwald, S. Peak functions for modeling high resolution soil profile data Geoderma, 2011, 166, 74-83.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>See examples for ideas on simulating several profiles at once.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='profile_compare-methods.html'>profile_compare</a>, <a href='hzDistinctnessCodeToOffset.html'>hzDistinctnessCodeToOffset</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># generate 10 random profiles with default settings:</span>
<span class='fu'>require</span>(<span class='no'>plyr</span>)
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/plyr/topics/ldply'>ldply</a></span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='no'>random_profile</span>)

<span class='co'># add a fake color</span>
<span class='no'>d</span>$<span class='no'>soil_color</span> <span class='kw'>&lt;-</span> <span class='st'>'white'</span>

<span class='co'># promote to SoilProfileCollection and plot</span>
<span class='fu'>depths</span>(<span class='no'>d</span>) <span class='kw'>&lt;-</span> <span class='no'>id</span> ~ <span class='no'>top</span> + <span class='no'>bottom</span>
<span class='fu'><a href='SPC-plotting.html'>plot</a></span>(<span class='no'>d</span>)</div><div class='output co'>#&gt; <span class='message'>guessing horizon designations are stored in `name`</span></div><div class='img'><img src='random_profile-1.png' alt='' width='700' height='433' /></div><div class='input'>

<span class='co'># simulate horizon boundary distinctness codes:</span>
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/plyr/topics/ldply'>ldply</a></span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='no'>random_profile</span>, <span class='kw'>HzDistinctSim</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='no'>d</span>$<span class='no'>soil_color</span> <span class='kw'>&lt;-</span> <span class='fu'>grey</span>(<span class='fl'>0.85</span>)
<span class='fu'>depths</span>(<span class='no'>d</span>) <span class='kw'>&lt;-</span> <span class='no'>id</span> ~ <span class='no'>top</span> + <span class='no'>bottom</span>
<span class='no'>d</span>$<span class='no'>HzD</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='hzDistinctnessCodeToOffset.html'>hzDistinctnessCodeToOffset</a></span>(<span class='no'>d</span>$<span class='no'>HzDistinctCode</span>)
<span class='fu'><a href='SPC-plotting.html'>plot</a></span>(<span class='no'>d</span>, <span class='kw'>hz.distinctness.offset</span><span class='kw'>=</span><span class='st'>'HzD'</span>)</div><div class='output co'>#&gt; <span class='message'>guessing horizon designations are stored in `name`</span></div><div class='img'><img src='random_profile-2.png' alt='' width='700' height='433' /></div><div class='input'>


<span class='co'># depth functions are generated using the LPP function</span>
<span class='no'>opar</span> <span class='kw'>&lt;-</span> <span class='fu'>par</span>(<span class='kw'>mfrow</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>1</span>), <span class='kw'>mar</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>3</span>,<span class='fl'>0</span>))
<span class='co'># generate data</span>
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/plyr/topics/ldply'>ldply</a></span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='no'>random_profile</span>, <span class='kw'>n</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>6</span>, <span class='fl'>7</span>, <span class='fl'>8</span>), <span class='kw'>n_prop</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>'LPP'</span>)

<span class='co'># promote to SPC and plot</span>
<span class='fu'>depths</span>(<span class='no'>d</span>) <span class='kw'>&lt;-</span> <span class='no'>id</span> ~ <span class='no'>top</span> + <span class='no'>bottom</span>
<span class='fu'><a href='SPC-plotting.html'>plot</a></span>(<span class='no'>d</span>, <span class='kw'>color</span><span class='kw'>=</span><span class='st'>'p1'</span>)</div><div class='output co'>#&gt; <span class='message'>guessing horizon designations are stored in `name`</span></div><div class='input'>
<span class='co'># do this again, this time set all of the LPP parameters</span>
<span class='no'>d</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/plyr/topics/ldply'>ldply</a></span>(<span class='fl'>1</span>:<span class='fl'>10</span>, <span class='no'>random_profile</span>, <span class='kw'>n</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>6</span>, <span class='fl'>7</span>, <span class='fl'>8</span>), <span class='kw'>n_prop</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>'LPP'</span>,
<span class='kw'>lpp.a</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>lpp.b</span><span class='kw'>=</span><span class='fl'>10</span>, <span class='kw'>lpp.d</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>lpp.e</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>lpp.u</span><span class='kw'>=</span><span class='fl'>25</span>)

<span class='fu'>depths</span>(<span class='no'>d</span>) <span class='kw'>&lt;-</span> <span class='no'>id</span> ~ <span class='no'>top</span> + <span class='no'>bottom</span>
<span class='fu'><a href='SPC-plotting.html'>plot</a></span>(<span class='no'>d</span>, <span class='kw'>color</span><span class='kw'>=</span><span class='st'>'p1'</span>)</div><div class='output co'>#&gt; <span class='message'>guessing horizon designations are stored in `name`</span></div><div class='img'><img src='random_profile-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># reset plotting defaults</span>
<span class='fu'>par</span>(<span class='no'>opar</span>)



<span class='co'># try plotting the LPP-derived simulated data</span>
<span class='co'># aggregated over all profiles</span>
<span class='no'>a</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='SPC-slab-methods.html'>slab</a></span>(<span class='no'>d</span>, <span class='kw'>fm</span><span class='kw'>=</span> ~ <span class='no'>p1</span>)
<span class='no'>a</span>$<span class='no'>mid</span> <span class='kw'>&lt;-</span> <span class='fu'>with</span>(<span class='no'>a</span>, (<span class='no'>top</span> + <span class='no'>bottom</span>) / <span class='fl'>2</span>)

<span class='fu'>library</span>(<span class='no'>lattice</span>)
(<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/lattice/topics/xyplot'>xyplot</a></span>(<span class='no'>mid</span> ~ <span class='no'>p.q50</span>, <span class='kw'>data</span><span class='kw'>=</span><span class='no'>a</span>,
<span class='kw'>lower</span><span class='kw'>=</span><span class='no'>a</span>$<span class='no'>p.q25</span>, <span class='kw'>upper</span><span class='kw'>=</span><span class='no'>a</span>$<span class='no'>p.q75</span>, <span class='kw'>ylim</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>150</span>,-<span class='fl'>5</span>), <span class='kw'>alpha</span><span class='kw'>=</span><span class='fl'>0.5</span>,
<span class='kw'>panel</span><span class='kw'>=</span><span class='no'>panel.depth_function</span>, <span class='kw'>prepanel</span><span class='kw'>=</span><span class='no'>prepanel.depth_function</span>,
<span class='kw'>cf</span><span class='kw'>=</span><span class='no'>a</span>$<span class='no'>contributing_fraction</span>, <span class='kw'>xlab</span><span class='kw'>=</span><span class='st'>'Simulated Data'</span>, <span class='kw'>ylab</span><span class='kw'>=</span><span class='st'>'Depth'</span>,
<span class='kw'>main</span><span class='kw'>=</span><span class='st'>'LPP(a=5, b=10, d=5, e=5, u=25)'</span>,
<span class='kw'>par.settings</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>superpose.line</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>col</span><span class='kw'>=</span><span class='st'>'black'</span>, <span class='kw'>lwd</span><span class='kw'>=</span><span class='fl'>2</span>))
))</div><div class='img'><img src='random_profile-4.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># optionally add original data as step-functions</span>
<span class='kw'>if</span>(<span class='fu'>require</span>(<span class='no'>latticeExtra</span>)) {
  <span class='no'>h</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='SPC-utils.html'>horizons</a></span>(<span class='no'>d</span>)
  <span class='no'>p1</span> + <span class='fu'><a href='http://www.rdocumentation.org/packages/latticeExtra/topics/as.layer'>as.layer</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/lattice/topics/xyplot'>xyplot</a></span>(<span class='no'>top</span> ~ <span class='no'>p1</span>, <span class='kw'>groups</span><span class='kw'>=</span><span class='no'>id</span>, <span class='kw'>data</span><span class='kw'>=</span><span class='no'>h</span>,
  <span class='kw'>horizontal</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'S'</span>,
  <span class='kw'>par.settings</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>superpose.line</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>col</span><span class='kw'>=</span><span class='st'>'blue'</span>, <span class='kw'>lwd</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>lty</span><span class='kw'>=</span><span class='fl'>2</span>))))
  }</div><div class='output co'>#&gt; <span class='message'>Loading required package: latticeExtra</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: RColorBrewer</span></div><div class='img'><img src='random_profile-5.png' alt='' width='700' height='433' /></div><div class='input'>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    Dylan E. Beaudette
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Dylan Beaudette, Pierre Roudier, Andrew Brown.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

